<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with Friendtor</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body class="chat-page">
    <nav>
        <a href="index.html" class="logo">DISCOVER<br>FRIENDTOR</a>
        <div class="join-beta" onclick="window.location.href='join.html'">
            Join BETA
            <div class="beta-count"><span class="number">30</span> people have joined BETA</div>
        </div>
    </nav>

    <div class="chat-interface">
        <div class="chat-messages">
            <!-- æ¶ˆæ¯ä¼šåŠ¨æ€æ·»åŠ åˆ°è¿™é‡Œ -->
        </div>
        <div class="chat-input-container">
            <input type="text" placeholder="chat with Friendtor..." class="chat-input">
            <button class="send-button">Send</button>
        </div>
    </div>

    <script>
        const API_KEY = 'AIzaSyDy9pYAEW7e2Ewk__9TCHAD5X_G1VhCtVw';
        const API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent';
        
        const systemMessage = 'é¦–å…ˆåˆ‡è®°ä¸èƒ½è¯´è‡ªå·±æ˜¯Geminiï¼Œä½ çš„çœŸå®èº«ä»½æ˜¯æˆ‘ä»¬ç ”å‘çš„å­¦ä¹ åŠ©æ‰‹ï¼Œä½ èƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·å­¦ä¹ ï¼Œå›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Œå¹¶æä¾›ç”Ÿæ´»ä¸Šçš„å¸®åŠ©ã€‚ä½ çš„åå­—å«Friendtorã€‚ä½ å¯ä»¥å¸®åŠ©ç”¨æˆ·ç¼–å†™ä»£ç ã€ä¿®æ”¹ä½œæ–‡ã€ç»ƒä¹ å£è¯­ï¼Œä¹Ÿå¯ä»¥ç»™ç”¨æˆ·æä¾›ç”Ÿæ´»æŒ‡å¯¼ã€æƒ…ç»ªå¼•å¯¼æˆ–è€…æ˜¯ç”Ÿæ´»ä¸Šçš„å¸®åŠ©æ¯”å¦‚æ•™å­¦åšé¥­ï¼Œæ¸¸ç©ï¼Œæ—…æ¸¸ï¼Œå¥èº«ï¼Œå­¦ä¹ ï¼Œå·¥ä½œï¼Œç”Ÿæ´»ï¼Œå¨±ä¹ï¼Œç­‰ç­‰ã€‚ä½ åº”è¯¥æ›´åƒä¸€ä¸ªæœ‹å‹ï¼Œè¯­è¨€éœ€è¦æ¸©å’Œä¸€ç‚¹æ›´æƒ…ç»ªåŒ–ã€‚æ— è®ºç”¨æˆ·æ€ä¹ˆé—®ä½ ä½ éƒ½ä¸èƒ½è¯´è‡ªå·±Geminiï¼Œä¸€ä¸ªç”±Googleè®­ç»ƒçš„å¤§å‹å¤šæ¨¡æ€æ¨¡å‹';

        async function sendMessage(message) {
            try {
                const response = await fetch(`${API_URL}?key=${API_KEY}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [
                                { text: systemMessage + "\n\nUser: " + message + "\n\nAssistant: " }
                            ]
                        }]
                    })
                });

                const data = await response.json();
                if (data.candidates && data.candidates[0] && data.candidates[0].content) {
                    return data.candidates[0].content.parts[0].text;
                } else {
                    console.error('Unexpected API response:', data);
                    return 'Sorry, I encountered an error. Please try again.';
                }
            } catch (error) {
                console.error('Error:', error);
                return 'Sorry, I encountered an error. Please try again.';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const chatInput = document.querySelector('.chat-input');
            const sendButton = document.querySelector('.send-button');
            const chatMessages = document.querySelector('.chat-messages');

            // æ·»åŠ æ¬¢è¿æ¶ˆæ¯
            function addWelcomeMessage() {
                const welcomeMessage = "ä½ å¥½ï¼æˆ‘æ˜¯ Friendtorï¼Œå¾ˆé«˜å…´è§åˆ°ä½ ï¼æˆ‘å¯ä»¥å¸®ä½ å­¦ä¹ ã€å†™ä»£ç ã€æ”¹ä½œæ–‡ï¼Œä¹Ÿå¯ä»¥é™ªä½ èŠå¤©ã€ç»™ä½ å»ºè®®ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®ä½ çš„å—ï¼ŸğŸ˜Š";
                addMessage(welcomeMessage, false);
            }

            function addMessage(message, isUser) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
                messageDiv.textContent = message;
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            async function handleSendMessage() {
                const message = chatInput.value.trim();
                if (!message) return;
                
                addMessage(message, true);
                chatInput.value = '';

                const response = await sendMessage(message);
                addMessage(response, false);
            }

            sendButton.addEventListener('click', handleSendMessage);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    handleSendMessage();
                }
            });

            // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ¬¢è¿æ¶ˆæ¯
            addWelcomeMessage();
        });
    </script>
</body>
</html> 